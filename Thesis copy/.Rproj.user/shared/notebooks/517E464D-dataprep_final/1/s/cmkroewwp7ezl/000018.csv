"0","# functions to make processing Bodenrichtwert data easier"
"0","brw_processing <- function(x){"
"0","  # casts objects from SpatialPolygons to sf dataframe"
"0","  # filters out only residential areas, only selects relevant columns, and removes empty geometries"
"0","  y <- x %>% st_as_sf() %>%"
"0","    st_transform(3035) %>%"
"0","    dplyr::filter(NUTZUNG == ""W - Wohngebiet"") %>%"
"0","    dplyr::select(gml_id, BRW, geometry) %>%"
"0","    filter(!st_is_empty(.))"
"0","  # removes outliers from data beyond the .95 threshold on a normal distribution"
"0","  val <- y$BRW"
"0","  yUL <- val %>% quantile(.95, na.rm = TRUE)"
"0","  out1 <- y %>%"
"0","    dplyr::filter(BRW < yUL)"
"0","  # casts the geometry of the dataframe from polygons to points for easier interpolation"
"0","  out <- st_centroid(out1)"
"0","  return(out)"
"0","}"
"0",""
"0","# this really should be with fewer lines using lapply(), but because the objects produced by brw_processing() are sf dataframes and dataframes, list2env() doesn't work"
"0","brw2012 <- brw_processing(brw2012)"
"0","brw2011 <- brw_processing(brw2011)"
"0","brw2010 <- brw_processing(brw2010)"
"0","brw2004 <- brw_processing(brw2004)"
"0","brw2003 <- brw_processing(brw2003)"
"0","brw2002 <- brw_processing(brw2002)"
"0",""
"0","cbrw2003comb <- rbind(brw2002, brw2003, brw2004) %>% as_Spatial()"
"0","brw2011comb <- rbind(brw2010, brw2011, brw2012) %>% as_Spatial()"
